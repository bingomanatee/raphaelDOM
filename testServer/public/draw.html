<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Draw Tests</title>

    <script language="javascript" src="/js/vendor/underscore-min.js">
    </script>

    <script language="javascript" src="/js/vendor/jquery-1.7.2.min.js">
    </script>

    <script language="javascript" src="/js/vendor/raphael-min.js">
    </script>

    <script language="javascript" src="/js/raphaelDOM.js">
    </script>

</head>
<body>
<h1>RaphaelDOM use tests</h1>

<h2>Basic grid</h2>

<div id="draw-area" style="width: 1000px; height: 500px"></div>

<h2>Inset grids</h2>

<div id="draw-area2" style="width: 1000px; height: 500px"></div>

<h2>Report</h2>

<pre id="report"></pre>

<script>
    $(function () {

        (function () {

            var paper = Raphael($('#draw-area')[0]);

            var box = new raphaelDOM.Box('target 1', {width: 300, height: 300, drawAttrs: {fill: 'red'}},
                    $('#draw-area'), paper);

            _.each(_.range(0, 100, 20), function (y) {
                var row = box.child('row' + y).setHeight('20%').setTopMargin(y + '%');
                row.drawMode = 'none';

                _.each(_.range(0, 100, 20), function (x) {
                    var child = row.child('t1 cell' + x + 'row' + y).setWidth('20%').setLeftMargin(x + '%');
                    child.color.red = Math.floor((x * 255) / 100);
                    child.color.blue = Math.floor((y * 255) / 100);
                });
            });

            box.draw();

        })();

        (function () {

            var paper = Raphael($('#draw-area2')[0]);

            var box = new raphaelDOM.Box('target 2', {width: 300, height: 300, drawAttrs: {fill: 'red'}},
                    $('#draw-area2'), paper);

            _.each(_.range(0, 100, 20), function (y) {
                var row = box.child('row' + y).setHeight('20%').setTopMargin(y + '%');
                row.drawMode = 'none';

                _.each(_.range(0, 100, 20), function (x) {
                    var child = row.child('t2cell' + x + 'row' + y).setWidth('20%').setLeftMargin(x + '%').setPadding('10%');
                    child.drawMode = 'none';
                    child.padding = '20%';
                    var inner = child.child(child.name + 'inner');
                     inner.color.red = Math.floor((x * 255) / 100);
                    inner.color.blue = Math.floor((y * 255) / 100);

                    console.log('inner rect: ', inner.rect());
                    console.log ('    inner parent: ', inner.parent.rect(), ' inset ', inner.parent.rect(true));
                });
            });

            box.draw();
        })();

    })
</script>
</body>
</html>